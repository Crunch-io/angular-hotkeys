/*! 
 * angular-hotkeys v1.7.0
 * https://chieffancypants.github.io/angular-hotkeys
 * Copyright (c) 2017 Wes Cruver
 * License: MIT
 */

!function(){"use strict";angular.module("cfp.hotkeys").directive("hotkey",["hotkeys",function(e){return{restrict:"A",link:function(t,n,o){var i=[];angular.forEach(t.$eval(o.hotkey),function(t,n){var r="string"==typeof o.hotkeyAllowIn?o.hotkeyAllowIn.split(/[\s,]+/):[];i.push(n),e.add({combo:n,description:o.hotkeyDescription,callback:t,action:o.hotkeyAction,allowIn:r})}),n.bind("$destroy",function(){angular.forEach(i,e.del)})}}}])}(),function(){"use strict";angular.module("cfp.hotkeys").provider("HotKey",function(){function e(e){function n(n){var o={command:"⌘",shift:"⇧",left:"←",right:"→",up:"↑",down:"↓",return:"⏎",backspace:"⌫",option:"⌥"};return n.split("+").map(function(n){var i=n;if("mod"===n||"command"===n||"ctrl"===n)i=e.navigator&&e.navigator.platform.indexOf("Mac")>=0?"command":"ctrl";else if("alt"===n||"option"===n)if(e.navigator&&e.navigator.platform.indexOf("Mac")>=0)switch(t.macAlt){case"symbol":i="opt";break;case"alt":i="alt";break;default:i="option"}else i="alt";return o[i]||i}).join(" + ")}function o(e,t,n,o,i,r,a){this.combo=e instanceof Array?e:[e],this.description=t,this.callback=n,this.action=o,this.allowIn=i,this.persistent=r,this._formated=null,this.identifier=a}return o.prototype.format=function(){return null===this._formated&&(this._formated=this.combo.map(function(e){return e.split(/[\s]/).map(n)})),this._formated},o}e.$inject=["$window"];var t={macAlt:"option",$get:e};return t})}(),function(){"use strict";angular.module("cfp.hotkeys").provider("hotkeysCheatSheet",function(){function e(e,n,o,i,r,a){function c(){s.helpVisible=!s.helpVisible,s.hotkeys=a.all(),s.helpVisible?(l=a.get("esc"),a.del("esc"),a.add("esc",l.description,c,null,["INPUT","SELECT","TEXTAREA"])):(a.del("esc"),!1!==l&&a.add(l))}var s=null,l=!1,u=!1;return{init:function(){if(!u&&(u=!0,s=n.$new(),s.helpVisible=!1,s.title=t.templateTitle,s.header=t.templateHeader,s.footer=t.templateFooter,s.toggleCheatSheet=c,t.includeCheatSheet)){var i=r[0],l=e[0];a.add(t.hotkey,t.description,c),l!==i&&l!==i.documentElement||(l=i.body);var f=angular.element(this.template);angular.element(l).append(o(f)(s))}},toggleCheatSheet:c,template:t.template,includeCheatSheet:t.includeCheatSheet,hotkey:t.hotkey,description:t.description,templateTitle:t.templateTitle}}e.$inject=["$rootElement","$rootScope","$compile","$window","$document","hotkeys"];var t={includeCheatSheet:!0,templateTitle:"Keyboard Shortcuts:",templateHeader:null,templateFooter:null,template:'<div class="cfp-hotkeys-container fade" ng-class="{in: helpVisible}"><div class="cfp-hotkeys"><h4 class="cfp-hotkeys-title" ng-if="!header">{{ title }}</h4><div ng-bind-html="header" ng-if="header"></div><table><tbody><tr ng-repeat="hotkey in hotkeys | filter:{ description: \'!$$undefined$$\' }"><td class="cfp-hotkeys-keys"><span ng-repeat-start="combo in hotkey.format() track by $index"><span class="cfp-hotkeys-key" ng-repeat="key in combo track by $index">{{ key }}</span></span><span ng-repeat-end class="cfp-hotkeys-keys-separator" ng-if="!$last">or</span></td><td class="cfp-hotkeys-text">{{ hotkey.description }}</td></tr></tbody></table><div ng-bind-html="footer" ng-if="footer"></div><div class="cfp-hotkeys-close" ng-click="toggleCheatSheet()">&#215;</div></div></div>',hotkey:"?",description:"Show / hide this help menu",$get:e};return t})}(),function(){"use strict";angular.module("cfp.hotkeys").provider("hotkeys",["$injector",function(e){function t(e,t,o,i,r){function a(){for(var e=h.hotkeys.length;e--;){var t=h.hotkeys[e];t&&!t.persistent&&s(t)}}function c(e,t,n,o,i,a,c){var l,f=["INPUT","SELECT","TEXTAREA"];if("[object Object]"===Object.prototype.toString.call(e)&&(t=e.description,n=e.callback,o=e.action,a=e.persistent,i=e.allowIn,c=e.identifier,e=e.combo),s(e),t instanceof Function?(o=n,n=t,t="$$undefined$$"):angular.isUndefined(t)&&(t="$$undefined$$"),void 0===a&&(a=!0),"function"==typeof n){l=n,i instanceof Array||(i=[]);for(var p,d=0;d<i.length;d++)i[d]=i[d].toUpperCase(),-1!==(p=f.indexOf(i[d]))&&f.splice(p,1);n=function(e){var t=!0;if(e){var n=e.target||e.srcElement,o=n.nodeName.toUpperCase();if((" "+n.className+" ").indexOf(" mousetrap ")>-1)t=!0;else for(var i=0;i<f.length;i++)if(f[i]===o){t=!1;break}}t&&u(l.apply(this,arguments))}}"string"==typeof o?Mousetrap.bind(e,u(n),o):Mousetrap.bind(e,u(n));var y=new r(e,t,n,o,i,a,c);return h.hotkeys.push(y),y}function s(e){var t=e instanceof r?e.combo:e;if(Mousetrap.unbind(t),angular.isArray(t)){for(var n=!0,o=t.length;o--;)n=s(t[o])&&n;return n}var i=h.hotkeys.indexOf(l(t));return i>-1&&(h.hotkeys[i].combo.length>1?h.hotkeys[i].combo.splice(h.hotkeys[i].combo.indexOf(t),1):(angular.forEach(d,function(e){var t=e.indexOf(h.hotkeys[i]);-1!==t&&e.splice(t,1)}),h.hotkeys.splice(i,1)),!0)}function l(e){if(!e)return h.hotkeys;for(var t,n=0;n<h.hotkeys.length;n++)if((t=h.hotkeys[n]).combo.indexOf(e)>-1)return t;return!1}function u(e){return function(n,o){if(e instanceof Array){var i=e[0],r=e[1];e=function(){r.scope.$eval(i)}}t.$apply(function(){e(n,l(o))})}}var f=!1,p=!0;Mousetrap.prototype.stopCallback=function(e,t){return!p||!((" "+t.className+" ").indexOf(" mousetrap ")>-1)&&(t.contentEditable&&"true"===t.contentEditable)};var h={},d={},y={},m=[];return{init:function(){f||(f=!0,(h=t.$new()).hotkeys=[],d={},n.useNgRoute&&t.$on("$routeChangeSuccess",function(e,t){a(),t&&t.hotkeys&&angular.forEach(t.hotkeys,function(e){var n=e[2];("string"==typeof n||n instanceof String)&&(e[2]=[n,t]),e[5]=!1,c.apply(this,e)})}),n.useNgState&&t.$on("$stateChangeSuccess",function(e,t){a(),y&&y[t.name]&&(angular.forEach(y[t.name],function(e){e.persistent=!1,c(e)}),m.length&&angular.forEach(m,function(e){e()}))}))},add:c,del:s,get:l,getById:function(e){var t=[];if(h.hotkeys)for(var n=0;n<h.hotkeys.length;n++){var o=h.hotkeys[n];o.identifier===e&&t.push(o)}return t},all:function(){return l()},bindTo:function(e){return e.$id in d||(d[e.$id]=[],e.$on("$destroy",function(){for(var t=d[e.$id].length;t--;)s(d[e.$id].pop())})),{add:function(t){var n;return n=arguments.length>1?c.apply(this,arguments):c(t),d[e.$id].push(n),this}}},bindToState:function(e,t){(t instanceof Array?t:[t]).forEach(function(t){y[t]||(y[t]=[]),y[t].push(e)})},useNgRoute:n.useNgRoute,usNgState:n.useNgState,purgeHotkeys:a,pause:function(){p=!1},unpause:function(){p=!0},onStateHotkeysReady:function(e){return m.push(e),function(){var t=m.indexOf(e);m.splice(t,1)}}}}t.$inject=["$rootElement","$rootScope","$compile","$window","HotKey"];var n={useNgRoute:e.has("ngViewDirective"),useNgState:!1,$get:t};return n}])}(),function(){"use strict";angular.module("cfp.hotkeys",[]).run(["hotkeys","hotkeysCheatSheet",function(e,t){e.init(),t.init()}])}(),function(e,t,n){function o(e,t,n){e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent("on"+t,n)}function i(e){if("keypress"==e.type){var t=String.fromCharCode(e.which);return e.shiftKey||(t=t.toLowerCase()),t}return k[e.which]?k[e.which]:g[e.which]?g[e.which]:String.fromCharCode(e.which).toLowerCase()}function r(e,t){return e.sort().join(",")===t.sort().join(",")}function a(e){var t=[];return e.shiftKey&&t.push("shift"),e.altKey&&t.push("alt"),e.ctrlKey&&t.push("ctrl"),e.metaKey&&t.push("meta"),t}function c(e){e.preventDefault?e.preventDefault():e.returnValue=!1}function s(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0}function l(e){return"shift"==e||"ctrl"==e||"alt"==e||"meta"==e}function u(){if(!m){m={};for(var e in k)e>95&&e<112||k.hasOwnProperty(e)&&(m[k[e]]=e)}return m}function f(e,t,n){return n||(n=u()[e]?"keydown":"keypress"),"keypress"==n&&t.length&&(n="keydown"),n}function p(e){return"+"===e?["+"]:(e=e.replace(/\+{2}/g,"+plus")).split("+")}function h(e,t){var n,o,i,r=[];for(n=p(e),i=0;i<n.length;++i)o=n[i],b[o]&&(o=b[o]),t&&"keypress"!=t&&v[o]&&(o=v[o],r.push("shift")),l(o)&&r.push(o);return t=f(o,r,t),{key:o,modifiers:r,action:t}}function d(e,n){return null!==e&&e!==t&&(e===n||d(e.parentNode,n))}function y(e){function n(e){e=e||{};var t,n=!1;for(t in b)e[t]?n=!0:b[t]=0;n||(E=!1)}function u(e,t,n,o,i,a){var c,s,u=[],f=n.type;if(!g._callbacks[e])return[];for("keyup"==f&&l(e)&&(t=[e]),c=0;c<g._callbacks[e].length;++c)if(s=g._callbacks[e][c],(o||!s.seq||b[s.seq]==s.level)&&f==s.action&&("keypress"==f&&!n.metaKey&&!n.ctrlKey||r(t,s.modifiers))){var p=!o&&s.combo==i,h=o&&s.seq==o&&s.level==a;(p||h)&&g._callbacks[e].splice(c,1),u.push(s)}return u}function f(e,t,n,o){g.stopCallback(t,t.target||t.srcElement,n,o)||!1===e(t,n)&&(c(t),s(t))}function p(e){"number"!=typeof e.which&&(e.which=e.keyCode);var t=i(e);t&&("keyup"!=e.type||$!==t?g.handleKey(t,a(e),e):$=!1)}function d(){clearTimeout(v),v=setTimeout(n,1e3)}function m(e,t,o,r){b[e]=0;for(var a=0;a<t.length;++a){var c=a+1===t.length?function(t){f(o,t,e),"keyup"!==r&&($=i(t)),setTimeout(n,10)}:function(t){return function(){E=t,++b[e],d()}}(r||h(t[a+1]).action);k(t[a],c,r,e,a)}}function k(e,t,n,o,i){g._directMap[e+":"+n]=t;var r,a=(e=e.replace(/\s+/g," ")).split(" ");a.length>1?m(e,a,t,n):(r=h(e,n),g._callbacks[r.key]=g._callbacks[r.key]||[],u(r.key,r.modifiers,{type:r.action},o,e,i),g._callbacks[r.key][o?"unshift":"push"]({callback:t,modifiers:r.modifiers,action:r.action,seq:o,level:i,combo:e}))}var g=this;if(e=e||t,!(g instanceof y))return new y(e);g.target=e,g._callbacks={},g._directMap={};var v,b={},$=!1,w=!1,E=!1;g._handleKey=function(e,t,o){var i,r=u(e,t,o),a={},c=0,s=!1;for(i=0;i<r.length;++i)r[i].seq&&(c=Math.max(c,r[i].level));for(i=0;i<r.length;++i)if(r[i].seq){if(r[i].level!=c)continue;s=!0,a[r[i].seq]=1,f(r[i].callback,o,r[i].combo,r[i].seq)}else s||f(r[i].callback,o,r[i].combo);var p="keypress"==o.type&&w;o.type!=E||l(e)||p||n(a),w=s&&"keydown"==o.type},g._bindMultiple=function(e,t,n){for(var o=0;o<e.length;++o)k(e[o],t,n)},o(e,"keypress",p),o(e,"keydown",p),o(e,"keyup",p)}for(var m,k={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"ins",46:"del",91:"meta",93:"meta",224:"meta"},g={106:"*",107:"+",109:"-",110:".",111:"/",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},v={"~":"`","!":"1","@":"2","#":"3",$:"4","%":"5","^":"6","&":"7","*":"8","(":"9",")":"0",_:"-","+":"=",":":";",'"':"'","<":",",">":".","?":"/","|":"\\"},b={option:"alt",command:"meta",return:"enter",escape:"esc",plus:"+",mod:/Mac|iPod|iPhone|iPad/.test(navigator.platform)?"meta":"ctrl"},$=1;$<20;++$)k[111+$]="f"+$;for($=0;$<=9;++$)k[$+96]=$;y.prototype.bind=function(e,t,n){var o=this;return e=e instanceof Array?e:[e],o._bindMultiple.call(o,e,t,n),o},y.prototype.unbind=function(e,t){var n=this;return n.bind.call(n,e,function(){},t)},y.prototype.trigger=function(e,t){var n=this;return n._directMap[e+":"+t]&&n._directMap[e+":"+t]({},e),n},y.prototype.reset=function(){var e=this;return e._callbacks={},e._directMap={},e},y.prototype.stopCallback=function(e,t){var n=this;return!((" "+t.className+" ").indexOf(" mousetrap ")>-1)&&(!d(t,n.target)&&("INPUT"==t.tagName||"SELECT"==t.tagName||"TEXTAREA"==t.tagName||t.isContentEditable))},y.prototype.handleKey=function(){var e=this;return e._handleKey.apply(e,arguments)},y.init=function(){var e=y(t);for(var n in e)"_"!==n.charAt(0)&&(y[n]=function(t){return function(){return e[t].apply(e,arguments)}}(n))},y.init(),e.Mousetrap=y,"undefined"!=typeof module&&module.exports&&(module.exports=y),"function"==typeof define&&define.amd&&define(function(){return y})}(window,document);